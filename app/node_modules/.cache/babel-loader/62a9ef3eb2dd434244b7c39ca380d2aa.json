{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../style/Confirm.css';import{Auth}from'aws-amplify';var Confirm=/*#__PURE__*/function(_Component){_inherits(Confirm,_Component);function Confirm(){var _getPrototypeOf2;var _this;_classCallCheck(this,Confirm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Confirm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:\"\",code:\"\",message:'',errors:{email:false,code:false}};_this.messages={username_incorect:'email does not contain @ ',code_incorect:'Code has to have only 6 signs'};_this.formValidation=function(){var email=false;var code=false;var correct=false;if(_this.state.code.length==6){code=true;}if(_this.state.email.length>5&&_this.state.email.indexOf(' ')===-1){email=true;}if(email&&code){correct=true;}return{correct:correct,code:code,email:email};};_this.handleChange=function(e){var name=e.target.name;_this.setState(_defineProperty({},name,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var validation;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();validation=_this.formValidation();console.log(validation);if(!validation.correct){_context.next=16;break;}_this.setState({message:'Send, please wait',errors:{email:false,code:false}});_context.prev=5;_context.next=8;return Auth.confirmSignUp(_this.state.email,_this.state.code);case 8:// console.log(vall)\nalert(\"User confirmed\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);alert(_context.t0.message);case 14:_context.next=17;break;case 16:_this.setState({errors:{email:!validation.email,code:!validation.code}});case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Confirm,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;if(this.state.message!==''){setTimeout(function(){return _this2.setState({message:''});},9000);}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"confirm\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"label\",{htmlFor:\"user\"},\"email:\",React.createElement(\"input\",{type:\"text\",id:\"user\",name:\"email\",value:this.state.email,onChange:this.handleChange}),this.state.errors.email&&React.createElement(\"span\",null,\" \",this.messages.username_incorect)),React.createElement(\"label\",{htmlFor:\"code\"},\"Code:\",React.createElement(\"input\",{type:\"code\",name:\"code\",id:\"code\",value:this.state.code,onChange:this.handleChange}),this.state.errors.code&&React.createElement(\"span\",null,\" \",this.messages.code_incorect)),React.createElement(\"button\",null,\"Confirm\")),this.state.message&&React.createElement(\"h3\",null,this.state.message));}}]);return Confirm;}(Component);export default Confirm;","map":{"version":3,"sources":["C:/Users/pikma/Desktop/Extinguisher-frontend/app/src/components/Home/Confirm.js"],"names":["React","Component","Auth","Confirm","state","email","code","message","errors","messages","username_incorect","code_incorect","formValidation","correct","length","indexOf","handleChange","e","name","target","setState","value","handleSubmit","preventDefault","validation","console","log","confirmSignUp","alert","setTimeout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport '../style/Confirm.css'\r\nimport { Auth } from 'aws-amplify'\r\n\r\nclass Confirm extends Component {\r\n    state = {\r\n        email: \"\",\r\n        code: \"\",\r\n        message: '',\r\n        errors: {\r\n            email: false,\r\n            code: false,\r\n        }\r\n    }\r\n        messages = {\r\n            username_incorect: 'email does not contain @ ',\r\n            code_incorect: 'Code has to have only 6 signs',\r\n        }\r\n        formValidation = () => {\r\n            let email = false\r\n            let code = false\r\n            let correct = false\r\n            if (this.state.code.length == 6 ) {\r\n                code = true\r\n            }\r\n            if (this.state.email.length > 5 && this.state.email.indexOf(' ') === -1) {\r\n                email = true\r\n            }\r\n            if (email && code) {\r\n                correct = true\r\n            }\r\n            return ({\r\n                correct, code, email\r\n            })\r\n        }\r\n        handleChange = (e) => {\r\n            const name = e.target.name;\r\n            this.setState({\r\n                [name]: e.target.value\r\n            })\r\n        };\r\n\r\n        handleSubmit = async (e) => {\r\n            e.preventDefault()\r\n    \r\n            const validation = this.formValidation()\r\n            console.log(validation)\r\n            if (validation.correct) {\r\n                this.setState({\r\n                    message: 'Send, please wait',\r\n                    errors: {\r\n                        email: false,\r\n                        code: false,\r\n                    }\r\n                })\r\n                try {   \r\n                    \r\n                    await Auth.confirmSignUp(this.state.email, this.state.code);\r\n                    // console.log(vall)\r\n                    alert(\"User confirmed\");\r\n                } catch (e) {\r\n                    alert(e.message);\r\n                }\r\n            }\r\n            else {\r\n                this.setState({\r\n                    errors: {\r\n                        email: !validation.email,\r\n                        code: !validation.code,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        componentDidUpdate() {\r\n            if (this.state.message !== '') {\r\n                setTimeout(() => this.setState({\r\n                    message: ''\r\n                }), 9000);\r\n            }\r\n        }\r\n        render() {\r\n            return (\r\n    \r\n                <div className=\"confirm\">\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <label htmlFor=\"user\">email:\r\n                               <input type=\"text\" id=\"user\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\r\n                            {this.state.errors.email && <span> {this.messages.username_incorect}</span>}\r\n                        </label>\r\n    \r\n                        <label htmlFor=\"code\">Code:\r\n                            <input type=\"code\" name=\"code\" id=\"code\" value={this.state.code} onChange={this.handleChange} />\r\n                            {this.state.errors.code && <span> {this.messages.code_incorect}</span>}\r\n                        </label>\r\n    \r\n                        <button>Confirm</button>\r\n                    </form>\r\n                    {this.state.message && <h3>{this.state.message}</h3>}\r\n    \r\n                </div>\r\n            );\r\n        }\r\n}\r\nexport default Confirm;"]},"metadata":{},"sourceType":"module"}