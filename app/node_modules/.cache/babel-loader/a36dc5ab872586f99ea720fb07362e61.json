{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../style/Login.css';import{Auth}from'aws-amplify';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={username:\"\",password:\"\",message:'',errors:{username:false,password:false}};_this.messages={username_incorect:'Name has to be longer than 10 signs and cannot contain space',password_incorect:'Password has to be longer than 8 signs'};_this.formValidation=function(){var username=false;var password=false;var correct=false;if(_this.state.username.length>5&&_this.state.username.indexOf(' ')===-1){username=true;}if(_this.state.password.length>8){password=true;}if(username&&password){correct=true;}return{correct:correct,username:username,password:password};};_this.handleChange=function(e){var name=e.target.name;_this.setState(_defineProperty({},name,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var validation;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();validation=_this.formValidation();console.log(validation);if(!validation.correct){_context.next=16;break;}_this.setState({message:'Send, please wait',errors:{username:false,password:false}});_context.prev=5;_context.next=8;return Auth.signIn(_this.state.username,_this.state.password);case 8:// console.log(vall)\nalert(\"Logged in\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);alert(_context.t0.message);case 14:_context.next=17;break;case 16:_this.setState({errors:{username:!validation.username,password:!validation.password}});case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;if(this.state.message!==''){setTimeout(function(){return _this2.setState({message:''});},9000);}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"login\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"label\",{htmlFor:\"user\"},\"Username:\",React.createElement(\"input\",{type:\"text\",id:\"user\",name:\"username\",value:this.state.username,onChange:this.handleChange}),this.state.errors.username&&React.createElement(\"span\",null,\" \",this.messages.username_incorect)),React.createElement(\"label\",{htmlFor:\"password\"},\"Password:\",React.createElement(\"input\",{type:\"password\",name:\"password\",id:\"password\",value:this.state.password,onChange:this.handleChange}),this.state.errors.password&&React.createElement(\"span\",null,\" \",this.messages.password_incorect)),React.createElement(\"button\",null,\"Confirm\")),this.state.message&&React.createElement(\"h3\",null,this.state.message));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/Users/pikma/Desktop/Extinguisher-frontend/app/src/components/Home/Login.js"],"names":["React","Component","Auth","Login","state","username","password","message","errors","messages","username_incorect","password_incorect","formValidation","correct","length","indexOf","handleChange","e","name","target","setState","value","handleSubmit","preventDefault","validation","console","log","signIn","alert","setTimeout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../style/Login.css'\nimport { Auth } from 'aws-amplify'\nclass Login extends Component {\n    state = {\n        username: \"\",\n        password: \"\",\n        message: '',\n        errors: {\n            username: false,\n            password: false,\n        }\n    }\n    messages = {\n        username_incorect: 'Name has to be longer than 10 signs and cannot contain space',\n        password_incorect: 'Password has to be longer than 8 signs',\n    }\n    formValidation = () => {\n        let username = false\n        let password = false\n        let correct = false\n        if (this.state.username.length > 5 && this.state.username.indexOf(' ') === -1) {\n            username = true\n        }\n        if (this.state.password.length > 8) {\n            password = true;\n        }\n        if (username && password) {\n            correct = true\n        }\n        return ({\n            correct, username, password\n        })\n    }\n\n    handleChange = (e) => {\n        const name = e.target.name;\n        this.setState({\n            [name]: e.target.value\n        })\n    };\n    handleSubmit = async (e) => {\n        e.preventDefault()\n\n        const validation = this.formValidation()\n        console.log(validation)\n        if (validation.correct) {\n            this.setState({\n                message: 'Send, please wait',\n                errors: {\n                    username: false,\n                    password: false,\n                }\n            })\n            try {\n                    \n                await Auth.signIn(this.state.username, this.state.password);\n                // console.log(vall)\n                alert(\"Logged in\");\n            } catch (e) {\n                alert(e.message);\n            }\n        }\n        else {\n            this.setState({\n                errors: {\n                    username: !validation.username,\n                    password: !validation.password,\n                }\n            })\n        }\n    }\n    componentDidUpdate() {\n        if (this.state.message !== '') {\n            setTimeout(() => this.setState({\n                message: ''\n            }), 9000);\n        }\n    }\n\n    render() {\n        return (\n\n            <div className=\"login\">\n                <form onSubmit={this.handleSubmit}>\n                    <label htmlFor=\"user\">Username:\n                           <input type=\"text\" id=\"user\" name=\"username\" value={this.state.username} onChange={this.handleChange} />\n                        {this.state.errors.username && <span> {this.messages.username_incorect}</span>}\n                    </label>\n\n                    <label htmlFor=\"password\">Password:\n                        <input type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        {this.state.errors.password && <span> {this.messages.password_incorect}</span>}\n                    </label>\n\n                    <button>Confirm</button>\n                </form>\n                {this.state.message && <h3>{this.state.message}</h3>}\n\n            </div>\n        );\n    }\n}\n\nexport default Login;\n\n"]},"metadata":{},"sourceType":"module"}