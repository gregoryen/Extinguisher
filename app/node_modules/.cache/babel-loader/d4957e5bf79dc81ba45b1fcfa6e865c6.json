{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pikma\\\\Desktop\\\\Extinguisher-frontend\\\\app\\\\src\\\\components\\\\Home\\\\Register.js\";\nimport React, { Component } from 'react';\nimport '../style/Register.css';\nimport { Auth } from 'aws-amplify';\nimport { CognitoUserAttribute } from 'amazon-cognito-identity-js';\n\nclass Register extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      message: '',\n      errors: {\n        username: false,\n        email: false,\n        password: false\n      }\n    };\n    this.messages = {\n      username_incorect: 'Name has to be longer than 10 signs and cannot contain space',\n      email_incorect: 'email does not contain @ ',\n      password_incorect: 'Password has to be longer than 8 signs, one Big letter, one special sign, and one number'\n    };\n\n    this.formValidation = () => {\n      let username = false;\n      let password = false;\n      let email = false;\n      let correct = false;\n\n      if (this.state.username.length > 10 && this.state.username.indexOf(' ') === -1) {\n        username = true;\n      }\n\n      if (this.state.password.length > 8) {\n        password = true;\n      }\n\n      if (this.state.email.indexOf('@') !== -1) {\n        email = true;\n      }\n\n      if (username && password && email) {\n        correct = true;\n      }\n\n      return {\n        correct,\n        username,\n        password,\n        email\n      };\n    };\n\n    this.handleChange = e => {\n      const name = e.target.name;\n      this.setState({\n        [name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const validation = this.formValidation();\n      console.log(validation);\n\n      if (validation.correct) {\n        this.setState({\n          message: 'Send, please wait',\n          errors: {\n            username: false,\n            password: false,\n            email: false\n          }\n        });\n        var attributeList = [];\n        var dataEmail = {\n          Name: this.state.username,\n          Value: this.state.email\n        };\n        var attributeEmail = new CognitoUserAttribute(dataEmail);\n        attributeList.push(attributeEmail);\n        var cognitoUser;\n        Auth.signUp(this.state.username, this.state.password, attributeList, null, function (err, result) {\n          if (err) {\n            alert(err);\n            return;\n          }\n\n          cognitoUser = result.user;\n          console.log('user name is ' + cognitoUser.getUsername());\n        });\n      } else {\n        this.setState({\n          errors: {\n            username: !validation.username,\n            password: !validation.password,\n            email: !validation.email\n          }\n        });\n      }\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.message !== '') {\n      setTimeout(() => this.setState({\n        message: ''\n      }), 9000);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Username:\", React.createElement(\"input\", {\n      type: \"text\",\n      id: \"user\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), this.state.errors.username && React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \" \", this.messages.username_incorect)), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"input\", {\n      type: \"email\",\n      id: \"email\",\n      name: \"email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), this.state.errors.email && React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \" \", this.messages.email_incorect)), React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Password:\", React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), this.state.errors.password && React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \" \", this.messages.password_incorect)), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Confirm\")), this.state.message && React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.state.message));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/pikma/Desktop/Extinguisher-frontend/app/src/components/Home/Register.js"],"names":["React","Component","Auth","CognitoUserAttribute","Register","state","username","email","password","message","errors","messages","username_incorect","email_incorect","password_incorect","formValidation","correct","length","indexOf","handleChange","e","name","target","setState","value","handleSubmit","preventDefault","validation","console","log","attributeList","dataEmail","Name","Value","attributeEmail","push","cognitoUser","signUp","err","result","alert","user","getUsername","componentDidUpdate","setTimeout","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../style/Register.css'\nimport { Auth } from 'aws-amplify'\nimport { CognitoUserAttribute } from 'amazon-cognito-identity-js';\n\n\nclass Register extends Component {\n    state = {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        message: '',\n        errors: {\n            username: false,\n            email: false,\n            password: false,\n        }\n    }\n    messages = {\n        username_incorect: 'Name has to be longer than 10 signs and cannot contain space',\n        email_incorect: 'email does not contain @ ',\n        password_incorect: 'Password has to be longer than 8 signs, one Big letter, one special sign, and one number',\n    }\n    formValidation = () => {\n        let username = false\n        let password = false\n        let email = false\n        let correct = false\n        if (this.state.username.length > 10 && this.state.username.indexOf(' ') === -1) {\n            username = true\n        }\n        if (this.state.password.length > 8) {\n            password = true;\n        }\n        if (this.state.email.indexOf('@') !== -1) {\n            email = true;\n        }\n        if (username && password && email) {\n            correct = true\n        }\n        return ({\n            correct, username, password, email\n        })\n    }\n    handleChange = (e) => {\n        const name = e.target.name;\n        this.setState({\n            [name]: e.target.value\n        })\n    }\n    handleSubmit = e => {\n        e.preventDefault()\n\n        const validation = this.formValidation()\n        console.log(validation)\n        if (validation.correct) {\n            this.setState({\n                message: 'Send, please wait',\n                errors: {\n                    username: false,\n                    password: false,\n                    email: false\n                }\n            })\n\n\n    \n\n    var attributeList = [];\n    \n    var dataEmail = {\n        Name : this.state.username,\n        Value : this.state.email\n    };\n    var attributeEmail = new CognitoUserAttribute(dataEmail);\n\n\n    attributeList.push(attributeEmail);\n\nvar cognitoUser;\n    Auth.signUp(this.state.username, this.state.password, attributeList, null, function(err, result){\n        if (err) {\n            alert(err);\n            return;\n        }\n        \n        cognitoUser = result.user;\n        console.log('user name is ' + cognitoUser.getUsername());\n    });\n        }\n        else {\n            this.setState({\n                errors: {\n                    username: !validation.username,\n                    password: !validation.password,\n                    email: !validation.email\n                }\n            })\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.state.message !== '') {\n            setTimeout(() => this.setState({\n                message: ''\n            }), 9000);\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"register\">\n                <form onSubmit={this.handleSubmit}>\n                    <label htmlFor=\"user\">Username:\n                           <input type=\"text\" id=\"user\" name=\"username\" value={this.state.username} onChange={this.handleChange} />\n                        {this.state.errors.username && <span> {this.messages.username_incorect}</span>}\n                    </label>\n                    <label htmlFor=\"email\">Email:\n                           <input type=\"email\" id=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                        {this.state.errors.email && <span> {this.messages.email_incorect}</span>}\n                    </label>\n                    <label htmlFor=\"password\">Password:\n                        <input type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        {this.state.errors.password && <span> {this.messages.password_incorect}</span>}\n                    </label>\n\n\n                    <button>Confirm</button>\n                </form>\n                {this.state.message && <h3>{this.state.message}</h3>}\n            </div>\n        );\n    }\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}